<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.suixingpay.hw.system.mapper.EnterpriseMapper">

    <resultMap type="Enterprise" id="EnterpriseResult">
        <id     property="enterpriseId"       column="enterprise_id"      />
        <result property="name"       column="name"      />
        <result property="address"    column="address"   />
        <result property="uscd"     column="uscd"    />
        <result property="createDate"        column="create_date"        />
        <result property="creater"  column="creater"  />
        <result property="admin"          column="admin"          />
        <result property="logo"       column="logo"       />
    </resultMap>

    <select id="selectEnterpriseList" parameterType="com.suixingpay.hw.system.domain.Enterprise" resultMap="EnterpriseResult">
       SELECT enterprise_id,NAME,address,uscd,create_date,creater,admin,logo FROM t_enterprise where 1 = 1
        <if test="enterpriseId != null and enterpriseId != 0">
            AND enterprise_id like concat('%', #{enterpriseId}, '%')
        </if>
        <if test="name != null and name != ''">
            AND name like concat('%', #{name}, '%')
        </if>
        <if test="address != null and address != ''">
            AND address like concat('%', #{address}, '%')
        </if>
        <if test="uscd != null and uscd != ''">
            AND uscd like concat('%', #{uscd}, '%')
        </if>
        <if test="admin != null and admin != 0">
            AND admin like concat('%', #{admin}, '%')
        </if>
    </select>

    <select id="selectEnterpriseByName" parameterType="java.lang.String" resultMap="EnterpriseResult">
       SELECT enterprise_id,NAME,address,uscd,create_date,creater,admin,logo FROM t_enterprise
        where name = #{name}
    </select>

    <select id="selectEnterpriseByAdmin" parameterType="int" resultMap="EnterpriseResult">
         SELECT enterprise_id,NAME,address,uscd,create_date,creater,admin,logo FROM t_enterprise
        where admin = #{admin}
    </select>

    <select id="selectEnterpriseByUscd" parameterType="java.lang.String" resultMap="EnterpriseResult">
        SELECT enterprise_id,NAME,address,uscd,create_date,creater,admin,logo FROM t_enterprise
        where uscd = #{uscd}
    </select>

    <select id="selectEnterpriseByEnterpriseId" parameterType="int" resultMap="EnterpriseResult">
		SELECT enterprise_id,NAME,address,uscd,create_date,creater,admin,logo FROM t_enterprise
        where enterprise_id = #{enterprise_id}
	</select>

    <delete id="deleteEnterpriseByEnterpriseId" parameterType="int">
 		delete from t_enterprise where enterprise_id = #{enterprise_id}
 	</delete>

    <!--<select id="selectEnterpriseUserByEnterpriseId" parameterType="int" resultMap="com.suixingpay.hw.system.domain.EnterpriseUser">-->
		<!--SELECT user_id,enterprise_id,account,password,name,phone,email,state,job_number,wx_open_id,wx_chatHead,qicq,create_date FROM t_enterprise_user-->
        <!--where enterprise_id = #{enterprise_id}-->
	<!--</select>-->

    <delete id="deleteEnterpriseUserByEnterpriseId" parameterType="int">
 		delete from t_enterprise_user where enterprise_id = #{enterprise_id}
 	</delete>

    <delete id="deleteEnterpriseByIds" parameterType="int">
        delete from t_enterprise where enterprise_id = #{enterpriseId}
        <foreach collection="array" item="enterpriseId" open="(" separator="," close=")">
            #{enterpriseId}
        </foreach>
    </delete>

    <update id="updateEnterpriseInfo" parameterType="com.suixingpay.hw.system.domain.Enterprise">
        update t_enterprise
        <set>
            <if test="enterpriseId != null and enterpriseId != 0">enterprise_id = #{enterpriseId},</if>
            <if test="name != null and name != ''">name = #{name},</if>
            <if test="address != null and address != ''">address = #{address},</if>
            <if test="uscd != null and uscd != ''">uscd = #{uscd},</if>
            <if test="creater != null and creater != ''">creater = #{creater},</if>
            <if test="admin != null and admin != ''">admin = #{admin},</if>
            <if test="logo != null and logo != ''">logo = #{logo},</if>
            create_date = sysdate()
        </set>
        where enterprise_id = #{enterpriseId}
    </update>

    <insert id="insertEnterprise" parameterType="com.suixingpay.hw.system.domain.Enterprise">
        insert into t_enterprise(
        <if test="name != null and name != ''">enterprise_id,</if>
        <if test="name != null and name != ''">name,</if>
        <if test="address != null and address != ''">address,</if>
        <if test="uscd != null and uscd != ''">uscd,</if>
        <if test="creater != null and creater != ''">creater,</if>
        admin,
        <if test="logo != null and logo != ''">logo,</if>
        create_date
        )values(
        <if test="enterpriseId != null and enterpriseId != ''">#{enterpriseId},</if>
        <if test="name != null and name != ''">#{name},</if>
        <if test="address != null and address != ''">#{address},</if>
        <if test="uscd != null and uscd != ''">#{uscd},</if>
        <if test="creater != null and creater != ''">#{creater},</if>
        0,
        <if test="logo != null and logo != ''">#{logo},</if>
        sysdate()
        )
    </insert>


    <insert id="insertEnterpriseUser" parameterType="com.suixingpay.hw.system.domain.EnterpriseUser">
        insert into t_enterprise_user(
        user_id,
        <if test="enterpriseId != null and enterpriseId != 0">enterprise_id,</if>
        <if test="account != null and account != ''">account,</if>
        <if test="password != null and password != ''">password,</if>
        <if test="name != null and name != ''">name,</if>
        <if test="phone != null and phone != ''">phone,</if>
        <if test="email != null and email != ''">email,</if>
        state,
        <if test="jobNumber != null and jobNumber != ''">job_number,</if>
        <if test="wxOpenId != null and wxOpenId != ''">wx_open_id,</if>
        <if test="wxChatHead != null and wxChatHead != ''">wx_chatHead,</if>
        <if test="qicq != null and qicq != ''">qicq,</if>
        create_date
        )values(
        <if test="enterpriseId != null and enterpriseId != 0">#{userId},</if>
        <if test="enterpriseId != null and enterpriseId != 0">#{enterpriseId},</if>
        <if test="account != null and account != ''">#{account},</if>
        <if test="password != null and password != ''">#{password},</if>
        <if test="name != null and name != ''">#{name},</if>
        <if test="phone != null and phone != ''">#{phone},</if>
        <if test="email != null and email != ''">#{email},</if>
        00,
        <if test="jobNumber != null and jobNumber != ''">#{jobNumber},</if>
        <if test="wxOpenId != null and wxOpenId != ''">#{wxOpenId},</if>
        <if test="wxChatHead != null and wxChatHead != ''">#{wxChatHead},</if>
        <if test="qicq != null and qicq != ''">#{qicq},</if>
        sysdate()
        )
    </insert>

    <select id="checkEnterpriseIdUnique" parameterType="int" resultType="int">
		select count(1) from t_enterprise where enterprise_id=#{enterpriseId}
	</select>
</mapper>