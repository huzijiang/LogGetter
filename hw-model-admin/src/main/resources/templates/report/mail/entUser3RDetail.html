<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org" >
<meta charset="utf-8">
<head th:include="include :: header"></head>
<body>
<div class="form-content">
    <form class="form-horizontal">
        <h4 class="form-header h2">报告信息</h4>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label"><span style="color: red; ">*</span>报告名称：</label>
                    <div class="col-sm-8">
                        <input autocomplete="off" class="form-control" type="text" th:value="${entReportTemp.name}" readonly>
                        <input id="enterpriseReportTemplateId" name="enterpriseReportTemplateId" type="hidden" th:value="${entReportTemp.enterpriseReportTemplateId}">
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <label class="col-sm-4 control-label"><span style="color: red; ">*</span>生成周期：</label>
                    <div class="col-sm-8">
                        <div class="input-group" style="width: 100%">
                            <select class="form-control m-b" th:with="type=${@fangCloudDict.getType('TargetModelMakeCycle')}" disabled>
                                <option th:each="fangCloudDict : ${type}" th:text="${fangCloudDict.valueDesc}" th:value="${fangCloudDict.value}" th:selected="${entReportTemp.makeCycle eq fangCloudDict.value}"></option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <div class="btn-group-sm" id="toolbar" role="group">
        <h4 class="form-header h2">邮件信息</h4>
    </div>
    <div class="col-sm-12 select-table table-striped">
        <table id="bootstrap-table" data-mobile-responsive="true"></table>
    </div>
</div>

<div th:include="include::footer"></div>
<script th:src="@{/ajax/libs/select/select2.js}"></script>
<script th:inline="javascript">

    var analysisFlag = [[${@permission.hasPermi('report:analysis')}]];

    $(function() {
        var entReportTempId = document.getElementById("enterpriseReportTemplateId").value;
        console.log("entReportTempId = ", entReportTempId);
        queryEntUser3RList(entReportTempId);
    });

    function queryEntUser3RList(entReportTempId) {
        var options = {
            url: ctx + "report/mail/getEntUser3RList/" + entReportTempId,
            sortName: "createDate",
            sortOrder: "desc",
            modalName: "邮件信息",
            columns: [
                {
                    field: 'enterpriseUserName',
                    title: '姓名'
                },
                {
                    field: 'enterpriseUserId',
                    title: '员工编号'
                },
                {
                    field: 'email',
                    title: '邮箱地址'
                },
                {
                    field: 'userType',
                    title: '接收类型'
                }]
        };
        $.table.init(options);
    }
</script>
</body>
</html>